version: 2

semantic_models:
  - name: rental_details
    description: |
      Semantic model for rental transaction details and attributes.

      Built on the dim_rentals conforming model to provide dimensional
      attributes for rental analysis and metric calculations.

      Primary use cases:
      - Join with rental transaction facts via rental_id
      - Segment rental analysis by payment method, source, and device
      - Filter rental metrics by rule type and guest status
    
    model: ref('dim_rentals')
    
    # ========== Configuration ==========
    config:
      meta:
        domain: commerce
        owner: Analytics Team
        contains_pii: false
        update_frequency: real-time
    
    # ========== Entities ==========
    entities:
      - name: rental
        type: primary
        expr: rental_sk
        description: Surrogate key for rental transactions
    
    # ========== Dimensions ==========
    dimensions:
      # Entity Identifiers
      - name: rental_id
        type: categorical
        expr: rental_id
        description: Natural key for rental (for user reference/filtering)
        label: Rental ID
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Booking
              subcategory: Booking Details
      
      # Business Rule Dimensions
      - name: rental_rule_type_title
        type: categorical
        expr: rental_rule_type_title
        description: Type of pricing rule applied to the rental transaction
        label: Pricing Rule Type
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Booking
              subcategory: Booking Rules
      
      - name: payment_type_title
        type: categorical
        expr: payment_type_title
        description: Payment method used for the transaction
        label: Payment Method
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Payment
              subcategory: Payment Method
      
      # Source & Channel Dimensions
      - name: rental_source_title
        type: categorical
        expr: rental_source_title
        description: Source channel through which the rental was created
        label: Source Channel
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Booking
              subcategory: Booking Source
      
      - name: rental_source_application
        type: categorical
        expr: rental_source_application
        description: Application used to create the rental
        label: Source Application
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Booking
              subcategory: Booking Source
      
      - name: rental_source_device_category
        type: categorical
        expr: rental_source_device_category
        description: Device category used for the rental (mobile, desktop, tablet)
        label: Device Category
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Technology
              subcategory: Device Type
      
      # User Type Dimensions
      - name: purchased_as_guest
        type: categorical
        expr: purchased_as_guest
        description: Whether the rental was purchased without a user account
        label: Purchased as Guest
        config:
          meta:
            hierarchy:
              entity: Rental
              category: Renter
              subcategory: Renter Type
