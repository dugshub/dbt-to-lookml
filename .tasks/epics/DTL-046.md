---
id: DTL-046
title: "Epic: Dynamic Date Selector for Fact Views"
type: epic
status: refinement
labels:
  - stack:backend
  - type:epic
  - priority:medium
created: 2025-12-17T21:30:00Z
updated: 2025-12-17T21:30:00Z
children:
  - DTL-047
  - DTL-048
  - DTL-049
  - DTL-050
  - DTL-051
  - DTL-052
  - DTL-053
---

# DTL-046: Epic: Dynamic Date Selector for Fact Views

## Problem Statement

Currently, Looker users must manually choose which time dimension to use for analysis
(e.g., rental created date, start date, or end date). This requires understanding the
data model and manually switching between dimension groups. A dynamic date selector
allows users to pivot their analysis across different date dimensions from a single
control, improving usability and reducing cognitive load.

## Solution Approach

Implement a date selector feature for Fact views that:
1. Auto-infers available date choices from time dimensions in the semantic model
2. Generates a LookML `parameter` for date selection
3. Generates a dynamic `dimension_group: calendar` that uses the selected parameter
4. Is opt-in via `--date-selector` CLI flag (applied to fact models only)
5. Supports explicit dimension control via `meta.date_selector: true/false`

## Detection Modes

Two modes controlled by `--date-selector-mode`:

### Auto Mode (default): `--date-selector-mode auto`
- Includes ALL time dimensions automatically
- Use `meta.date_selector: false` to EXCLUDE specific dimensions
- Example: exclude `updated_at` from calendar options

### Explicit Mode: `--date-selector-mode explicit`
- Includes ONLY dimensions with `meta.date_selector: true`
- More control over exactly which dimensions appear
- Useful when you want a curated subset

## Expected LookML Output

```lookml
parameter: calendar_date {
  type: unquoted
  label: "Calendar Date"
  description: "Select which date field to use for calendar analysis"
  allowed_value: { label: "Created" value: "rental_created_at_utc" }
  allowed_value: { label: "Starts" value: "rental_starts_at_utc" }
  allowed_value: { label: "Ends" value: "rental_ends_at_utc" }
  default_value: "rental_created_at_utc"
}

dimension_group: calendar {
  type: time
  timeframes: [date, week, month, quarter, year]
  sql: ${TABLE}.{% parameter calendar_date %}::timestamp ;;
  label: "Calendar"
  description: "Dynamic calendar based on selected date field"
  convert_tz: no
}
```

## Success Criteria

- [ ] CLI flag `--date-selector` enables the feature for fact models
- [ ] CLI flag `--date-selector-mode auto|explicit` controls detection mode
- [ ] Meta flag `date_selector: true/false` on dimensions for explicit control
- [ ] Auto mode: includes all time dims, respects `date_selector: false` exclusions
- [ ] Explicit mode: only includes dims with `date_selector: true`
- [ ] Parameter uses dimension labels for user-friendly display
- [ ] Default value uses the model's `agg_time_dimension` or first time dimension
- [ ] Calendar dimension group respects timezone_selector if present
- [ ] Unit tests cover both modes and edge cases

## Sub-Issues

- [DTL-047: Add --date-selector CLI flags and LookMLGenerator configuration](./../issues/DTL-047.md)
- [DTL-048: Add date_selector meta field to ConfigMeta schema](./../issues/DTL-048.md)
- [DTL-049: Implement time dimension detection for date selector](./../issues/DTL-049.md)
- [DTL-050: Generate calendar_date parameter in LookML](./../issues/DTL-050.md)
- [DTL-051: Generate dynamic calendar dimension_group](./../issues/DTL-051.md)
- [DTL-052: Integrate date selector with timezone_selector](./../issues/DTL-052.md)
- [DTL-053: Unit tests for date selector generation](./../issues/DTL-053.md)

## Links

- Plan: .tasks/plans/issue-plan-date-selector.yaml

## History

### 2025-12-17 21:30 - Epic Created
Created from plan: .tasks/plans/issue-plan-date-selector.yaml
