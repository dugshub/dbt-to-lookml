---
id: DTL-001
title: "Epic: Implement field exposure control for explore joins"
type: epic
status: refinement
labels:
  - stack:backend
  - type:epic
  - priority:high
created: 2025-11-12T17:15:00Z
updated: 2025-11-12T17:15:00Z
children:
  - DTL-002
  - DTL-003
  - DTL-004
  - DTL-005
  - DTL-006
---

# DTL-001: Epic: Implement field exposure control for explore joins

## Problem Statement

Currently, when explores join dimensional views, both dimensions AND measures from those views are exposed in the field picker. This creates incorrect analytics because measures from joined dimensional views only aggregate over the filtered/joined subset, not the entire dimension table.

For example, when joining `dim_searches` to `fct_rentals` through `search_sk`, the explore exposes search measures (count, sum, etc.) that only count searches associated with rentals, not all searches. This is misleading because Looker uses the rental table as the spine, so only searches with rental associations appear in the results.

## Solution Approach

Implement field exposure control using LookML field sets and the `fields` parameter in joins:

1. **Generate dimension-only field sets**: Create `set: dimensions_only` in all view files containing all dimensions (including hidden ones, which may be needed for joins)
2. **Constrain join field exposure**: Use `fields: [view.dimensions_only*]` in all explore join definitions to limit exposed fields to dimensions only
3. **Exclude measures from joins**: Measures remain only in the base fact explore view, preventing incorrect aggregations

This approach follows the principle that measures should only be aggregated from the base/spine table of an explore. Future enhancements will include:
- dbt-configured dimension sets for granular control
- Looker METRICS pattern for cross-view metric definitions
- Configurable field exposure per join

## Success Criteria

- [ ] All views generate a `set: dimensions_only` containing all dimension fields
- [ ] All explore joins include `fields: [view.dimensions_only*]` parameter
- [ ] Dimensional view measures no longer appear in fact table explores
- [ ] Existing tests pass with updated explore structure
- [ ] Golden tests reflect new explore join structure with field constraints

## Sub-Issues

- [DTL-002: Add LookML set support to schemas](./../issues/DTL-002.md) - ðŸ“‹ refinement
- [DTL-003: Generate dimension-only field sets in views](./../issues/DTL-003.md) - ðŸ“‹ refinement
- [DTL-004: Update join generation with fields parameter](./../issues/DTL-004.md) - ðŸ“‹ refinement
- [DTL-005: Update unit tests for field sets and joins](./../issues/DTL-005.md) - ðŸ“‹ refinement
- [DTL-006: Update integration and golden tests](./../issues/DTL-006.md) - ðŸ“‹ refinement

## Links
- Plan: .tasks/plans/issue-plan-explore-field-exposure-control.yaml

## History
### 2025-11-12 17:15 - Epic Created
Created from plan: .tasks/plans/issue-plan-explore-field-exposure-control.yaml
