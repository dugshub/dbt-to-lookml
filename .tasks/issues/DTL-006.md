---
id: DTL-006
title: "Update integration and golden tests"
type: feature
stack: backend
status: refinement
labels:
  - stack:backend
  - type:feature
  - priority:medium
created: 2025-11-12T17:15:00Z
updated: 2025-11-12T17:15:00Z
parent: DTL-001
---

# DTL-006: Update integration and golden tests

## Problem Statement

Update end-to-end tests to verify field exposure control works correctly with real semantic models and matches expected LookML output.

## What needs to be built

- Update golden test expected outputs in `src/tests/golden/expected_output/` to include sets and join fields
- Add integration test cases for field exposure scenarios
- Update test fixtures in `src/tests/fixtures/` if needed for new scenarios
- Verify explores only show dimensions from joined views, not measures
- Test multi-hop join scenarios maintain field constraints through the chain

## Why it's needed (connection to epic)

Integration and golden tests provide end-to-end validation that field exposure control works correctly with real-world semantic models and produces correct LookML output.

## Technical scope from labels

Backend testing work in `src/tests/`:
- Update integration tests (test_integration.py)
- Update golden tests (test_golden.py)
- Regenerate expected output files
- Maintain test isolation and determinism

## Testing requirements

- Golden tests pass with updated expected output
- Integration tests verify end-to-end functionality
- Test coverage remains at 95%+ branch coverage
- Run with `make test-full` for comprehensive validation

## Success Criteria

- [ ] Implementation complete
- [ ] Tests passing
- [ ] Documentation updated

## Links
- Epic: [DTL-001](./../epics/DTL-001.md)
- Strategy: [.tasks/strategies/DTL-006-strategy.md](./../strategies/DTL-006-strategy.md)
- Spec: [.tasks/specs/DTL-006-spec.md](./../specs/DTL-006-spec.md)

## History
### 2025-11-12 17:15 - Issue Created
Created from epic DTL-001
