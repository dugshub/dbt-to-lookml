---
id: DTL-052
title: "Integrate date selector with timezone_selector"
type: feature
status: refinement
labels:
  - stack:backend
  - type:feature
  - layer:features
created: 2025-12-17T21:30:00Z
updated: 2025-12-17T21:30:00Z
parent: DTL-046
---

# DTL-052: Integrate date selector with timezone_selector

## Problem Statement

Ensure the calendar dimension_group works correctly with the existing
timezone_selector parameter if present.

## Implementation Details

- Detect if model has timezone variants (existing `_has_timezone_variants` method)
- If timezone variants exist, modify calendar SQL to respect timezone:
  ```sql
  {% if timezone_selector._parameter_value == '_local' %}
  ${TABLE}.{% parameter calendar_date %}_local::timestamp
  {% elsif timezone_selector._parameter_value == '_utc' %}
  ${TABLE}.{% parameter calendar_date %}_utc::timestamp
  {% endif %}
  ```
- This requires time dimensions to follow naming convention:
  `{base_name}_local` and `{base_name}_utc`

## Alternative Approach (Simpler)

For V1, keep it simple - use the `_utc` suffix by default:
```sql
${TABLE}.{% parameter calendar_date %}::timestamp
```
Users select from UTC columns (e.g., rental_created_at_utc).
Timezone integration can be a follow-up enhancement.

## Success Criteria

- [ ] Implementation complete
- [ ] Tests passing
- [ ] Documentation updated

## Links

- Epic: [DTL-046](./../epics/DTL-046.md)
- Strategy: [.tasks/strategies/DTL-052-strategy.md](./../strategies/DTL-052-strategy.md)
- Spec: [.tasks/specs/DTL-052-spec.md](./../specs/DTL-052-spec.md)

## History

### 2025-12-17 21:30 - Issue Created
Created from epic DTL-046
