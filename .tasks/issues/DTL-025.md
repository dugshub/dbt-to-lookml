---
id: DTL-025
title: Update test expectations for measure generation
type: chore
stack: backend
status: in-review
labels:
- type:chore
- stack:backend
- layer:features
- priority:medium
- state:has-spec
created: 2025-11-21 00:00:00+00:00
updated: '2025-11-21T14:47:40.673618Z'
parent: DTL-022
---


# DTL-025: Update test expectations for measure generation

## Problem Statement

Update test files across all test suites to reflect the new measure suffix and hiding behavior.

Test areas to update:
1. Unit tests for Measure.to_lookml_dict():
   - Verify `_measure` suffix in generated names
   - Verify `hidden: yes` property present
   - Test with various measure configurations

2. Unit tests for _resolve_measure_reference():
   - Verify same-view references include suffix
   - Verify cross-view references include suffix
   - Test error cases (measure not found)

3. Integration tests:
   - Verify end-to-end measure generation with suffix
   - Verify metrics correctly reference suffixed measures
   - Test with multiple semantic models

4. Golden tests:
   - Update expected LookML output files
   - Verify view files show hidden measures with suffix
   - Verify metric measures reference suffixed measures

Technical scope:
- Files: src/tests/unit/, src/tests/integration/, src/tests/test_golden.py
- Layer: Features (testing the feature)

Coverage requirements:
- Maintain 95%+ branch coverage across all modules
- All existing tests should pass with updated expectations

Parent: Epic - Universal Measure Suffix and Hiding Strategy

## Success Criteria

- [ ] Unit tests updated for Measure.to_lookml_dict()
- [ ] Unit tests updated for _resolve_measure_reference()
- [ ] Integration tests updated for end-to-end flow
- [ ] Golden tests updated with new expected output
- [ ] All tests passing
- [ ] 95%+ branch coverage maintained

## Links

- Epic: [DTL-022](./../epics/DTL-022.md)
- Strategy: [.tasks/strategies/DTL-025-strategy.md](./../strategies/DTL-025-strategy.md)
- Spec: [.tasks/specs/DTL-025-spec.md](./../specs/DTL-025-spec.md)

## History

### 2025-11-21 00:00 - Issue Created
Created from epic DTL-022
