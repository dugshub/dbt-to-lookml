---
id: DTL-059
title: "Always generate calendar dimension_group with static/dynamic modes"
type: feature
status: spec-ready
labels:
  - stack:backend
  - type:feature
  - layer:features
created: 2025-12-23T00:00:00Z
updated: 2025-12-23T00:00:00Z
---

# DTL-059: Always generate calendar dimension_group with static/dynamic modes

## Problem Statement

Currently, the `calendar` dimension_group is only generated when `--date-selector` is enabled for fact models. This creates inconsistency:
- With date_selector: `calendar_date` exists (dynamic, parameter-driven)
- Without date_selector: No `calendar` dimension_group exists

This forces other features (like PoP) to have conditional logic based on whether date_selector is enabled.

## Solution

Always generate a `calendar` dimension_group for models that have an `agg_time_dimension`:

| Mode | SQL | Description |
|------|-----|-------------|
| Dynamic (date_selector enabled) | `${TABLE}.{% parameter calendar_date_param %}` | "Dynamic calendar based on selected date field" |
| Static (date_selector not enabled) | `${agg_time_dim_date}` | "Calendar date dimension (based on {field_name})" |

## Benefits

1. **Consistent reference**: Other features can always use `calendar_date`
2. **Future-proof**: Users can enable date_selector later without breaking references
3. **Transparent**: Static mode description shows the underlying field
4. **Reusable**: PoP, filters, and future features can rely on `calendar_date`

## Success Criteria

- [ ] `calendar` dimension_group always generated when model has `agg_time_dimension`
- [ ] Static mode uses `${agg_time_dim_date}` SQL
- [ ] Static mode description includes underlying field name
- [ ] Dynamic mode unchanged (parameter-based)
- [ ] Tests verify both modes

## Links

- Spec: [.tasks/specs/DTL-059-spec.md](./../specs/DTL-059-spec.md)
- Related: DTL-056 (will use `calendar_date` for PoP `based_on_time`)

## History

### 2025-12-23 00:00 - Issue Created
Extracted from DTL-056 as a general-purpose enhancement
