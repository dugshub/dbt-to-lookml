---
id: DTL-004
title: Update join generation with fields parameter
type: feature
stack: backend
status: awaiting-strategy-review
labels:
- stack:backend
- type:feature
- priority:high
created: 2025-11-12 17:15:00+00:00
updated: '2025-11-12T22:55:16.560513Z'
parent: DTL-001
---



# DTL-004: Update join generation with fields parameter

## Problem Statement

Modify explore join generation to include `fields: [view.dimensions_only*]` parameter, constraining exposed fields to dimensions only.

## What needs to be built

- Update `_build_join_graph()` method to add `fields` parameter to join dictionaries
- Set `fields: ["{view_name}.dimensions_only*"]` for each join
- Update `_generate_explores_lookml()` to include fields in join LookML output
- Ensure fields parameter appears in correct position (after relationship, before type)

## Why it's needed (connection to epic)

This completes the field exposure control by using the dimension-only sets in join definitions. Without this, measures from joined views would still appear in explores.

## Technical scope from labels

Backend work in `src/dbt_to_lookml/generators/lookml.py`:
- Modify join generation logic in _build_join_graph()
- Update join dictionary structure to include fields parameter
- Ensure lkml library correctly serializes fields parameter
- Maintain existing join functionality (sql_on, relationship, type)

## Testing requirements

- Unit tests for _build_join_graph() with fields parameter
- Verify fields parameter uses correct view name and wildcard syntax
- Test multi-hop joins include fields on all join levels
- Ensure joins without sets gracefully handle missing field references

## Success Criteria

- [ ] Implementation complete
- [ ] Tests passing
- [ ] Documentation updated

## Links
- Epic: [DTL-001](./../epics/DTL-001.md)
- Strategy: [.tasks/strategies/DTL-004-strategy.md](./../strategies/DTL-004-strategy.md)
- Spec: [.tasks/specs/DTL-004-spec.md](./../specs/DTL-004-spec.md)

## History

### 2025-11-12 22:55 - Strategy Generated
Strategy posted to .tasks/strategies/DTL-004-strategy.md
### 2025-11-12 17:15 - Issue Created
Created from epic DTL-001
